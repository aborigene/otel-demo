apiVersion: v1
kind: ConfigMap
metadata:
  name: otel-collector-config
data:
  config.yaml: |
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
          # http:
          #   endpoint: 0.0.0.0:4318

    exporters:
      otlphttp:
        endpoint: '${OTEL_ENDPOINT_URL}'
        headers: { 'Authorization': '${OTEL_AUTH_HEADER}' }

      # logging:
      #   loglevel: debug
      #   sampling_initial: 5
      #   sampling_thereafter: 200

    service:
      pipelines:
        traces:
          receivers: [otlp]
          processors: []
          exporters: [otlphttp]
          # exporters: [otlphttp, logging]
